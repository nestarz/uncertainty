{"version":3,"file":"oscilloscope.es.js","sources":["../../../node_modules/oscilloscope/dist/oscilloscope.es.js"],"sourcesContent":["var Oscilloscope = function Oscilloscope(source, options) {\n  if ( options === void 0 ) options = {};\n\n  if (!(source instanceof window.AudioNode)) {\n    throw new Error('Oscilloscope source must be an AudioNode');\n  }\n\n  if (source instanceof window.AnalyserNode) {\n    this.analyser = source;\n  } else {\n    this.analyser = source.context.createAnalyser();\n    source.connect(this.analyser);\n  }\n\n  if (options.fftSize) {\n    this.analyser.fftSize = options.fftSize;\n  }\n\n  this.timeDomain = new Uint8Array(this.analyser.frequencyBinCount);\n  this.drawRequest = 0;\n}; // begin default signal animation\n\n\nOscilloscope.prototype.animate = function animate (ctx, x0, y0, width, height) {\n    var this$1 = this;\n\n  if (this.drawRequest) {\n    throw new Error('Oscilloscope animation is already running');\n  }\n\n  this.ctx = ctx;\n\n  var drawLoop = function () {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    this$1.draw(ctx, x0, y0, width, height);\n    this$1.drawRequest = window.requestAnimationFrame(drawLoop);\n  };\n\n  drawLoop();\n}; // stop default signal animation\n\n\nOscilloscope.prototype.stop = function stop () {\n  if (this.drawRequest) {\n    window.cancelAnimationFrame(this.drawRequest);\n    this.drawRequest = 0;\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n  }\n}; // draw signal\n\n\nOscilloscope.prototype.draw = function draw (ctx, x0, y0, width, height) {\n    var this$1 = this;\n    if ( x0 === void 0 ) x0 = 0;\n    if ( y0 === void 0 ) y0 = 0;\n    if ( width === void 0 ) width = ctx.canvas.width - x0;\n    if ( height === void 0 ) height = ctx.canvas.height - y0;\n\n  this.analyser.getByteTimeDomainData(this.timeDomain);\n  var step = width / this.timeDomain.length;\n  ctx.beginPath(); // drawing loop (skipping every second record)\n\n  for (var i = 0; i < this.timeDomain.length; i += 2) {\n    var percent = this$1.timeDomain[i] / 256;\n    var x = x0 + i * step;\n    var y = y0 + height * percent;\n    ctx.lineTo(x, y);\n  }\n\n  ctx.stroke();\n};\n\nexport default Oscilloscope;\n"],"names":[],"mappings":"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"}